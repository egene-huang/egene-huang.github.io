<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>palm.strive</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://egene-huang.github.io/"/>
  <updated>2017-02-21T14:47:49.947Z</updated>
  <id>https://egene-huang.github.io/</id>
  
  <author>
    <name>egene-huang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>记一次hexo默认markdown引擎更换</title>
    <link href="https://egene-huang.github.io/2017/02/21/hexo-markdown-engine/"/>
    <id>https://egene-huang.github.io/2017/02/21/hexo-markdown-engine/</id>
    <published>2017-02-21T13:33:18.000Z</published>
    <updated>2017-02-21T14:47:49.947Z</updated>
    
    <content type="html"><![CDATA[<p>使用hexo搭建好博客以来，一直各种折腾，平时记录笔记生成的静态网页的时候总是会不太顺利, 基本上都会话费好长一段时间来排除<code>Markdown</code>标签导致的html代码生成的错误. 好几次都只好把一篇完整的日记拆分为两个. 因为我习惯的那些<code>Markdown</code>标签在<code>hexo</code>默认的<code>Markdown</code>引擎中不能识别，所以不能生成正确的html代码。提供的默认<code>Markdown</code>解析引擎是<code>hexo-renderer-marked</code>.<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"hexo-site"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.0"</span>,</div><div class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</div><div class="line">  <span class="attr">"hexo"</span>: &#123;</div><div class="line">    <span class="attr">"version"</span>: <span class="string">"3.2.2"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"dependencies"</span>: &#123;</div><div class="line">    <span class="attr">"hexo"</span>: <span class="string">"^3.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-browsersync"</span>: <span class="string">"^0.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-deployer-git"</span>: <span class="string">"^0.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-generator-archive"</span>: <span class="string">"^0.1.4"</span>,</div><div class="line">    <span class="attr">"hexo-generator-category"</span>: <span class="string">"^0.1.3"</span>,</div><div class="line">    <span class="attr">"hexo-generator-feed"</span>: <span class="string">"^1.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-generator-index"</span>: <span class="string">"^0.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-generator-sitemap"</span>: <span class="string">"^1.1.2"</span>,</div><div class="line">    <span class="attr">"hexo-generator-tag"</span>: <span class="string">"^0.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-renderer-ejs"</span>: <span class="string">"^0.2.0"</span>,</div><div class="line">    <span class="attr">"hexo-renderer-marked"</span>: <span class="string">"^0.2.11"</span>,</div><div class="line">    <span class="attr">"hexo-renderer-jade"</span>: <span class="string">"^0.3.0"</span>,</div><div class="line">    <span class="attr">"hexo-renderer-stylus"</span>: <span class="string">"^0.3.1"</span>,</div><div class="line">    <span class="attr">"hexo-server"</span>: <span class="string">"^0.2.0"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>marked引擎是最基本的markdown解释引擎，对后来的很多markdown扩展表强支持不是很有好，例如: <code>``` </code>语法</p>
<a id="more"></a>
<p>我经常需要使用这个标签,因为我经常贴系统配置/编程语言部分代码等,后来在知乎上找到一款marked引擎的替代者<code>hexo-renderer-markdown-it</code></p>
<!--
# Markdown-it config
## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki/
markdown:
  render:
    html: true # Doesn't escape HTML content
    linkify: true # Returns text links as proper links inlined with the paragraph.
    typographer: true # Substitution of common typographical elements will take place. -->
<pre><code>&lt;!-- 添加到站点_config.yml 下面 --&gt;
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用hexo搭建好博客以来，一直各种折腾，平时记录笔记生成的静态网页的时候总是会不太顺利, 基本上都会话费好长一段时间来排除&lt;code&gt;Markdown&lt;/code&gt;标签导致的html代码生成的错误. 好几次都只好把一篇完整的日记拆分为两个. 因为我习惯的那些&lt;code&gt;Markdown&lt;/code&gt;标签在&lt;code&gt;hexo&lt;/code&gt;默认的&lt;code&gt;Markdown&lt;/code&gt;引擎中不能识别，所以不能生成正确的html代码。提供的默认&lt;code&gt;Markdown&lt;/code&gt;解析引擎是&lt;code&gt;hexo-renderer-marked&lt;/code&gt;.&lt;br&gt;&lt;figure class=&quot;highlight json&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;11&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;12&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;13&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;14&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;15&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;16&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;17&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;18&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;19&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;20&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;21&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;22&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;23&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;24&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;hexo-site&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;version&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;0.0.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;private&quot;&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;hexo&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;version&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;3.2.2&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &lt;span class=&quot;attr&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;: &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^3.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-browsersync&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-deployer-git&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-generator-archive&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.1.4&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-generator-category&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.1.3&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-generator-feed&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^1.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-generator-index&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-generator-sitemap&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^1.1.2&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-generator-tag&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-renderer-ejs&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-renderer-marked&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.11&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-renderer-jade&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.3.0&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-renderer-stylus&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.3.1&quot;&lt;/span&gt;,&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;attr&quot;&gt;&quot;hexo-server&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;^0.2.0&quot;&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;  &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;marked引擎是最基本的markdown解释引擎，对后来的很多markdown扩展表强支持不是很有好，例如: &lt;code&gt;``` &lt;/code&gt;语法&lt;/p&gt;
    
    </summary>
    
      <category term="hexo" scheme="https://egene-huang.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="https://egene-huang.github.io/tags/hexo/"/>
    
      <category term="markdown" scheme="https://egene-huang.github.io/tags/markdown/"/>
    
      <category term="hexo-renderer-markdown-it" scheme="https://egene-huang.github.io/tags/hexo-renderer-markdown-it/"/>
    
  </entry>
  
  <entry>
    <title>spring beans 作用域</title>
    <link href="https://egene-huang.github.io/2017/02/21/spring-beans-scope/"/>
    <id>https://egene-huang.github.io/2017/02/21/spring-beans-scope/</id>
    <published>2017-02-21T02:50:13.000Z</published>
    <updated>2017-02-23T13:47:49.096Z</updated>
    
    <content type="html"><![CDATA[<p>一直以为,在spring IOC容器中管理的bean实例的作用域范围都是<code>singleton</code>,今天专门翻看了<a href="http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html" target="_blank" rel="external">spring docs</a>才知道,其实发展到<code>spring 3.0</code>以后,在IOC容器中存活的bean支持五种作用域配置:</p>
<ol>
<li>singleton</li>
<li>prototype</li>
<li>request</li>
<li>session</li>
<li>global session</li>
</ol>
<p>后面三种,只能存用于web应用的<code>ApplicationContext</code>.</p>
<a id="more"></a>
<p>这是从网站抓下来的 Table of Bean scopes:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Scope</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">singleton</td>
<td style="text-align:center">Scopes a single bean definition to a single object instance per Spring IoC container.</td>
</tr>
<tr>
<td style="text-align:center">prototype</td>
<td style="text-align:center">Scopes a single bean definition to any number of object instances.</td>
</tr>
<tr>
<td style="text-align:center">request</td>
<td style="text-align:center">Scopes a single bean definition to the lifecycle of a single HTTP request; that is each and every HTTP request will have its own instance of a bean created off the back of a single bean definition. Only valid in the context of a web-aware Spring ApplicationContext.</td>
</tr>
<tr>
<td style="text-align:center">session</td>
<td style="text-align:center">Scopes a single bean definition to the lifecycle of a HTTP Session. Only valid in the context of a web-aware Spring ApplicationContext.</td>
</tr>
<tr>
<td style="text-align:center">global session</td>
<td style="text-align:center">Scopes a single bean definition to the lifecycle of a global HTTP Session. Typically only valid when used in a portlet context. Only valid in the context of a web-aware Spring ApplicationContext.</td>
</tr>
</tbody>
</table>
<h4 id="singleton-scope"><a href="#singleton-scope" class="headerlink" title="singleton scope"></a>singleton scope</h4><p>在spring #IOC容器中管理的bean 作用域默认为 <code>singleton</code>的, 所以我们不需要特别配置,则应用中所有这个对象的引用共享一个对应的实例,一般就是在spring初始化的时候创建的那个实例. 这个实例是在整个spring容器中有且仅有一个,和我们说的单例设计模式是不同的, 在设计模式中,保证在一个classloader中只能存在一个实例.所以,我们有一种利用classloader类加载互斥的特性来实现单例.<br>我觉得<a href="http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html" target="_blank" rel="external">spring docs</a>上描述<code>singleton</code>的图片非常的简洁明了,简单易懂:</p>
<img src="/2017/02/21/spring-beans-scope/singleton.png" alt="singleton scope" title="singleton scope">
<p>在上面三个bean中都引用了<code>accountDao</code> 这个bean定义的收作用域是 <code>singleton</code>的,那么在左边三个bean中,<code>accountDao</code>引用共享一个实例.</p>
<p><code>singleton</code> bean 在<code>applicationContext.xml</code>中,配置类似这样:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.foo.DefaultAccountService"</span>/&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- the following is equivalent, though redundant (singleton scope is the default); using spring-beans-2.0.dtd --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.foo.DefaultAccountService"</span> <span class="attr">scope</span>=<span class="string">"singleton"</span>/&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- the following is equivalent and preserved for backward compatibility in spring-beans.dtd --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.foo.DefaultAccountService"</span> <span class="attr">singleton</span>=<span class="string">"true"</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>上面三种方式配置效果是等同的, 第一种为我们常见的配置,因为默认为<code>singleton</code>作用域.    </p>
<h4 id="prototype-scope"><a href="#prototype-scope" class="headerlink" title="prototype scope"></a>prototype scope</h4><p><code>prototype scope</code>和<code>singleton scope</code>的区别就是在产生多个实例上,在这个作用域范围,每个实例引用都拥有自己的实例,不和其他引用共享实例, 在每次请求这个bean在容器内注入或者使用<code>getBean()</code>方法得到这个bean的时候都会得到一个新的实例. 如下这种情况推荐使用<code>prototype scope</code> :</p>
<blockquote>
<p>容器内对象拥有自己的状态,各个实例引用持有者的对象状态不同,例如,报价服务对象,可以给不同产品报价,然后内部需要维护报价产品的部分信息.    </p>
</blockquote>
<p>在<code>xml</code>中定义 <code>prototype scope</code>bean类似这样:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- using spring-beans-2.0.dtd --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.foo.DefaultAccountService"</span> <span class="attr">scope</span>=<span class="string">"prototype"</span>/&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- the following is equivalent and preserved for backward compatibility in spring-beans.dtd --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"accountService"</span> <span class="attr">class</span>=<span class="string">"com.foo.DefaultAccountService"</span> <span class="attr">singleton</span>=<span class="string">"false"</span>/&gt;</span></div></pre></td></tr></table></figure></p>
<p>上面两种定义方式效果是等同的</p>
<p><a href="http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html" target="_blank" rel="external">spring docs</a>描述图片:<br><img src="/2017/02/21/spring-beans-scope/prototype.png" alt="prototype scope" title="prototype scope"></p>
<p>图片中左边定义的三个bean都引用了 <code>accountDao</code>,则这三个bean都会拥有自己的实例,这些实例的生命周期需要注意,docs说明如下:</p>
<blockquote>
<p>There is one quite important thing to be aware of when deploying a bean in the prototype scope, in that the lifecycle of the bean changes slightly. Spring does not manage the complete lifecycle of a prototype bean: the container instantiates, configures, decorates and otherwise assembles a prototype object, hands it to the client and then has no further knowledge of that prototype instance. This means that while initialization lifecycle callback methods will be called on all objects regardless of scope, in the case of prototypes, any configured destruction lifecycle callbacks will not be called. It is the responsibility of the client code to clean up prototype scoped objects and release any expensive resources that the prototype bean(s) are holding onto. (One possible way to get the Spring container to release resources used by prototype-scoped beans is through the use of a custom bean post-processor which would hold a reference to the beans that need to be cleaned up.)</p>
<p>In some respects, you can think of the Spring containers role when talking about a prototype-scoped bean as somewhat of a replacement for the Java ‘new’ operator. All lifecycle aspects past that point have to be handled by the client. (The lifecycle of a bean in the Spring container is further described in the section entitled Section 4.5.1, “Lifecycle callbacks”.)     </p>
</blockquote>
<h4 id="other-scopes"><a href="#other-scopes" class="headerlink" title="other scopes"></a>other scopes</h4><h5 id="request"><a href="#request" class="headerlink" title="request"></a>request</h5><p>在每次Http请求中,都会重新生成一个实例, 在action中最为常见,因为返回的实例中大多都包含了本次请求的信息, 随着这次请求的结束这些信息也就没有用了,并且不能影响下次的请求,所以这个对象的作用范围只能是本次请求.<br>定义:</p>
<pre><code class="xml"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"loginAction"</span> <span class="attr">class</span>=<span class="string">"com.foo.LoginAction"</span> <span class="attr">scope</span>=<span class="string">"request"</span>/&gt;</span>
</code></pre>
<h5 id="session"><a href="#session" class="headerlink" title="session"></a>session</h5><p>和request类似,如果定义一个bean的作用域为 session则不同的HttpSession中实例不同.<br>定义:<br><code>&lt;bean id=&quot;userPreferences&quot; class=&quot;com.foo.UserPreferences&quot; scope=&quot;session&quot;/&gt;</code><br>在HttpSession中,每个<code>userPreferences</code>引用持有者都修改自己的<code>userPreferences</code>实例,而不会相互影响.</p>
<h5 id="global-session"><a href="#global-session" class="headerlink" title="global session"></a>global session</h5><p>global session作用域bean定义类似这样:<br><code>&lt;bean id=&quot;userPreferences&quot; class=&quot;com.foo.UserPreferences&quot; scope=&quot;session&quot;/&gt;</code><br>global session有点类似 singleton不过其共享范围是在基于portlet context的各个应用之间.</p>
<blockquote>
<p>Please note that if you are writing a standard Servlet-based web application and you define one or more beans as having global session scope, the standard HTTP Session scope will be used, and no error will be raised.    </p>
</blockquote>
<p>参考资料:<br>4.4Bean scopes: <a href="http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html" target="_blank" rel="external">http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html</a>)<br>stackoverflow :<a href="http://stackoverflow.com/questions/17599216/spring-bean-scopes" target="_blank" rel="external">http://stackoverflow.com/questions/17599216/spring-bean-scopes</a><br>cnblog: <a href="http://www.cnblogs.com/cxyj/p/3906429.html" target="_blank" rel="external">http://www.cnblogs.com/cxyj/p/3906429.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一直以为,在spring IOC容器中管理的bean实例的作用域范围都是&lt;code&gt;singleton&lt;/code&gt;,今天专门翻看了&lt;a href=&quot;http://docs.spring.io/spring/docs/3.0.0.M3/reference/html/ch04s04.html&quot;&gt;spring docs&lt;/a&gt;才知道,其实发展到&lt;code&gt;spring 3.0&lt;/code&gt;以后,在IOC容器中存活的bean支持五种作用域配置:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;singleton&lt;/li&gt;
&lt;li&gt;prototype&lt;/li&gt;
&lt;li&gt;request&lt;/li&gt;
&lt;li&gt;session&lt;/li&gt;
&lt;li&gt;global session&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;后面三种,只能存用于web应用的&lt;code&gt;ApplicationContext&lt;/code&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="java web" scheme="https://egene-huang.github.io/categories/java-web/"/>
    
    
      <category term="spring" scheme="https://egene-huang.github.io/tags/spring/"/>
    
      <category term="spring beans" scheme="https://egene-huang.github.io/tags/spring-beans/"/>
    
      <category term="java web" scheme="https://egene-huang.github.io/tags/java-web/"/>
    
  </entry>
  
  <entry>
    <title>arch中小红点／触摸板驱动调整</title>
    <link href="https://egene-huang.github.io/2017/02/14/arch-TrackPoint-TouchPad/"/>
    <id>https://egene-huang.github.io/2017/02/14/arch-TrackPoint-TouchPad/</id>
    <published>2017-02-14T00:54:00.000Z</published>
    <updated>2017-02-23T13:47:49.096Z</updated>
    
    <content type="html"><![CDATA[<p>  在Arch中，小红点(TrackPoint)支持驱动有两个 – <a href="https://www.archlinux.org/packages/?name=xf86-input-evdev" target="_blank" rel="external">xf86-input-evdev</a> 和 <a href="https://www.archlinux.org/packages/?name=xf86-input-libinput" target="_blank" rel="external">xf86-input-libinput</a> 都支持它。evdev是 Xorg 的默认驱动。从<a href="https://www.archlinux.org/" target="_blank" rel="external">2017-01-14</a>起，xf86-input-libinput作为默认驱动，但是依然支持synaptics, evdev驱动配置．　如果因为升级导致支持驱动自动变为libinput，则可以重新安装evdev驱动然后调整配置文件还原回来．我就是这样的，因为，我考虑到毕竟libinput刚出来可能不是很稳定，再者，之前都是针对evdev的配置，所以不想又挨个儿修改配置,于是继续使用evden作为小红点的配置．<br><a id="more"></a></p>
<h4 id="安装驱动xf86-input-evdev"><a href="#安装驱动xf86-input-evdev" class="headerlink" title="安装驱动xf86-input-evdev"></a>安装驱动xf86-input-evdev</h4><p>首先，安装<code>xf86-input-evdev</code>驱动后，默认在<code>/usr/share/X11/xorg.conf.d</code>下有一个配置文件 - <code>10-evdev.conf</code>,大概内容如下:</p>
<pre>
#
# Catch-all evdev loader for udev-based systems
# We don't simply match on any device since that also adds accelerometers
# and other devices that we don't really want to use. The list below
# matches everything but joysticks.

Section "InputClass"
        Identifier "evdev pointer catchall"
        MatchIsPointer "on"
        MatchDevicePath "/dev/input/event*"
        Driver "evdev"
EndSection

Section "InputClass"
        Identifier "evdev keyboard catchall"
        MatchIsKeyboard "on"
        MatchDevicePath "/dev/input/event*"
        Driver "evdev"
EndSection

Section "InputClass"
        Identifier "evdev touchpad catchall"
        MatchIsTouchpad "on"
        MatchDevicePath "/dev/input/event*"
        Driver "evdev"
EndSection

Section "InputClass"
        Identifier "evdev tablet catchall"
        MatchIsTablet "on"
        MatchDevicePath "/dev/input/event*"
        Driver "evdev"
EndSection

Section "InputClass"
        Identifier "evdev touchscreen catchall"
        MatchIsTouchscreen "on"
        MatchDevicePath "/dev/input/event*"
        Driver "evdev"
EndSection
</pre>        


<p>将这个文件copy到<code>/etc/X11/xorg.conf.d/</code>下，然后结合<a href="https://wiki.archlinux.org/index.php/Touchpad_Synaptics" target="_blank" rel="external">synaptics</a>驱动一起控制触摸板[TouchPad]            </p>
<h4 id="安装驱动xf86-input-synaptics"><a href="#安装驱动xf86-input-synaptics" class="headerlink" title="安装驱动xf86-input-synaptics"></a>安装驱动xf86-input-synaptics</h4><p>同样，安装xf86-input-synaptics后其默认配置文件(<code>70-synaptics.conf</code>)在｀/usr/share/X11/xorg.conf.d/｀下, 我们需要将这个配置文件移动到<code>/etc/X11/xorg.conf.d/</code>目录下，然后才可以生效,内容类似这样:<br><code>/etc/X11/xorg.conf.d/70-synaptics.conf</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">Section <span class="string">"InputClass"</span></div><div class="line">    Identifier <span class="string">"touchpad"</span></div><div class="line">    Driver <span class="string">"synaptics"</span></div><div class="line">    MatchIsTouchpad <span class="string">"on"</span></div><div class="line">        Option <span class="string">"TapButton1"</span> <span class="string">"1"</span></div><div class="line">        Option <span class="string">"TapButton2"</span> <span class="string">"3"</span></div><div class="line">        Option <span class="string">"TapButton3"</span> <span class="string">"2"</span></div><div class="line">        Option <span class="string">"VertEdgeScroll"</span> <span class="string">"on"</span></div><div class="line">        Option <span class="string">"VertTwoFingerScroll"</span> <span class="string">"on"</span></div><div class="line">        Option <span class="string">"HorizEdgeScroll"</span> <span class="string">"on"</span></div><div class="line">        Option <span class="string">"HorizTwoFingerScroll"</span> <span class="string">"on"</span></div><div class="line">        Option <span class="string">"CircularScrolling"</span> <span class="string">"on"</span></div><div class="line">        Option <span class="string">"CircScrollTrigger"</span> <span class="string">"2"</span></div><div class="line">        Option <span class="string">"EmulateTwoFingerMinZ"</span> <span class="string">"40"</span></div><div class="line">        Option <span class="string">"EmulateTwoFingerMinW"</span> <span class="string">"8"</span></div><div class="line">        Option <span class="string">"CoastingSpeed"</span> <span class="string">"0"</span></div><div class="line">        Option <span class="string">"FingerLow"</span> <span class="string">"30"</span></div><div class="line">        Option <span class="string">"FingerHigh"</span> <span class="string">"50"</span></div><div class="line">        Option <span class="string">"MaxTapTime"</span> <span class="string">"125"</span></div><div class="line">        ...</div><div class="line">EndSection</div></pre></td></tr></table></figure>
<p>详细配置可以在<a href="https://wiki.archlinux.org/index.php/Touchpad_Synaptics#Configuration" target="_blank" rel="external">ArchWiki#Touchpad_Synaptics</a>查看.我的配置如下:<br><code>/etc/X11/xorg.conf.d/70-synaptics.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line"># Example xorg.conf.d snippet that assigns the touchpad driver</div><div class="line"># to all touchpads. See xorg.conf.d(5) for more information on</div><div class="line"># InputClass.</div><div class="line"># DO NOT EDIT THIS FILE, your distribution will likely overwrite</div><div class="line"># it when updating. Copy (and rename) this file into</div><div class="line"># /etc/X11/xorg.conf.d first.</div><div class="line"># Additional options may be added in the form of</div><div class="line">#   Option &quot;OptionName&quot; &quot;value&quot;</div><div class="line">#</div><div class="line">Section &quot;InputClass&quot;</div><div class="line">        Identifier &quot;touchpad catchall&quot;</div><div class="line">        Driver &quot;synaptics&quot;</div><div class="line">        MatchIsTouchpad &quot;on&quot;</div><div class="line"># This option is recommend on all Linux systems using evdev, but cannot be</div><div class="line"># enabled by default. See the following link for details:</div><div class="line"># http://who-t.blogspot.com/2010/11/how-to-ignore-configuration-errors.html</div><div class="line">       MatchDevicePath &quot;/dev/input/event*&quot;</div><div class="line">EndSection</div><div class="line"></div><div class="line">Section &quot;InputClass&quot;</div><div class="line">        Identifier &quot;touchpad ignore duplicates&quot;</div><div class="line">        MatchIsTouchpad &quot;on&quot;</div><div class="line">        MatchOS &quot;Linux&quot;</div><div class="line">        MatchDevicePath &quot;/dev/input/mouse*&quot;</div><div class="line">        Option &quot;Ignore&quot; &quot;on&quot;</div><div class="line">EndSection</div><div class="line"></div><div class="line"># This option enables the bottom right corner to be a right button on clickpads</div><div class="line"># and the right and middle top areas to be right / middle buttons on clickpads</div><div class="line"># with a top button area.</div><div class="line"># This option is only interpreted by clickpads.</div><div class="line">Section &quot;InputClass&quot;</div><div class="line">        Identifier &quot;Default clickpad buttons&quot;</div><div class="line">        MatchDriver &quot;synaptics&quot;</div><div class="line">        Option &quot;SoftButtonAreas&quot; &quot;50% 0 82% 0 0 0 0 0&quot;</div><div class="line">        Option &quot;SecondarySoftButtonAreas&quot; &quot;58% 0 0 15% 42% 58% 0 15%&quot;</div><div class="line">EndSection</div><div class="line"></div><div class="line"># This option disables software buttons on Apple touchpads.</div><div class="line"># This option is only interpreted by clickpads.</div><div class="line">Section &quot;InputClass&quot;</div><div class="line">        Identifier &quot;Disable clickpad buttons on Apple touchpads&quot;</div><div class="line">        MatchProduct &quot;Apple|bcm5974&quot;</div><div class="line">        MatchDriver &quot;synaptics&quot;</div><div class="line">        Option &quot;SoftButtonAreas&quot; &quot;0 0 0 0 0 0 0 0&quot;</div><div class="line">EndSection</div><div class="line"></div><div class="line"></div><div class="line">Section &quot;InputClass&quot;</div><div class="line">       Identifier &quot;TPPS/2 IBM TrackPoint&quot;</div><div class="line">       MatchProduct &quot;TPPS/2 IBM TrackPoint&quot;</div><div class="line">       MatchDriver &quot;synaptics&quot;</div><div class="line">       Option &quot;Device&quot; &quot;/dev/input/event*&quot;</div><div class="line">       Option &quot;Protocol&quot; &quot;auto-dev&quot;</div><div class="line">       Option &quot;TapButton1&quot; &quot;0&quot;</div><div class="line">       Option &quot;TapButton2&quot; &quot;0&quot;</div><div class="line">       Option &quot;LeftEdge&quot; &quot;1700&quot;</div><div class="line">       Option &quot;RightEdge&quot; &quot;5300&quot;</div><div class="line">       Option &quot;TopEdge&quot; &quot;1700&quot;</div><div class="line">       Option &quot;BottomEdge&quot; &quot;4200&quot;</div><div class="line">       Option &quot;FingerLow&quot; &quot;25&quot;</div><div class="line">       Option &quot;FingerHigh&quot; &quot;30&quot;</div><div class="line">       Option &quot;MaxTapTime&quot; &quot;180&quot;</div><div class="line">       Option &quot;MaxTapMove&quot; &quot;420&quot; #该值过小无法抓住文件窗口</div><div class="line">       Option &quot;MinSpeed&quot; &quot;0.7&quot; #该值越大指针移动快(&gt;1的和1相等)</div><div class="line">       Option &quot;MaxSpeed&quot; &quot;0.95&quot; #该值越大指针移动快(&gt;1的和1相等)</div><div class="line">       Option &quot;AccelFactor&quot; &quot;0.0010&quot;</div><div class="line">       Option &quot;RTCornerButton&quot;&quot;2&quot; #让触摸板 右侧顶部 表示鼠标中键</div><div class="line">       Option &quot;RBCornerButton&quot;&quot;3&quot; #让触摸板 右侧底部 表示鼠标右键</div><div class="line">       Option &quot;VertEdgeScroll&quot;&quot;1&quot; #启用垂直滚动条</div><div class="line">       Option &quot;VertScrollDelta&quot;&quot;100&quot; #该值越小滚动条滚动越快</div><div class="line">       Option &quot;HorizEdgeScroll&quot;&quot;1&quot;#启用水平滚动条</div><div class="line">       Option &quot;CornerCoasting&quot; &quot;1&quot;#如果手指滑动到最边界是否屏幕继续滚动</div><div class="line">       Option       &quot;SHMConfig&quot;     &quot;on&quot;</div><div class="line">       Option &quot;TouchpadOff&quot; &quot;1&quot;</div><div class="line">EndSection</div></pre></td></tr></table></figure></p>
<p>配置头，例如<code>MatchProduct</code> 可以使用 <code>xinput</code>命令查看,<code>xinput list</code>查看touchpad设备名称.如:</p>
<pre><code class="bash">$ xinput list
Virtual core pointer                        id=2    [master pointer  (3)]
Virtual core XTEST pointer                  id=4    [slave  pointer  (2)]
    MLK rapoo 3900                              id=10    [slave  pointer  (2)]
    SynPS/2 Synaptics TouchPad                  id=13    [slave  pointer  (2)]
    TPPS/2 IBM TrackPoint                       id=14    [slave  pointer  (2)]
Virtual core keyboard                       id=3    [master keyboard (2)]
  Virtual core XTEST keyboard                 id=5    [slave  keyboard (3)]
  Power Button                                id=6    [slave  keyboard (3)]
  Video Bus                                   id=7    [slave  keyboard (3)]
  Video Bus                                   id=8    [slave  keyboard (3)]
  Sleep Button                                id=9    [slave  keyboard (3)]
  Integrated Camera                           id=11    [slave  keyboard (3)]
  AT Translated Set 2 keyboard                id=12    [slave  keyboard (3)]
  ThinkPad Extra Buttons                      id=15    [slave  keyboard (3)]
</code></pre>
<p>然后, 如果你使用gnome-shell则,可以安装gnome扩展 -TouchpadIndicator, 它可以通过GUI禁用触摸板．一般的，有了小红点触摸板基本就不用了.当然<code>Synaptics</code>提供了丰富的触摸板个性化配置，<br>例如，类似Mac触摸板(号称世界上比鼠标还好用的触摸板体验)自然滚动，画圆滚动，打字自动禁用触摸板等等．<br>随便你配置，但是，假设Mac触摸板的说法是事实(因为我没有体验过)，我想非Mac机器上配置触摸板应该达不到Mac那种效果，所以还是以实用为主.其实，在我的世界里，小红点才是世界上最优的鼠标替代者！尤其是对字符编辑者来说尤其是.想想你的双手可以不用键盘鼠标来回的移动.  </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;  在Arch中，小红点(TrackPoint)支持驱动有两个 – &lt;a href=&quot;https://www.archlinux.org/packages/?name=xf86-input-evdev&quot;&gt;xf86-input-evdev&lt;/a&gt; 和 &lt;a href=&quot;https://www.archlinux.org/packages/?name=xf86-input-libinput&quot;&gt;xf86-input-libinput&lt;/a&gt; 都支持它。evdev是 Xorg 的默认驱动。从&lt;a href=&quot;https://www.archlinux.org/&quot;&gt;2017-01-14&lt;/a&gt;起，xf86-input-libinput作为默认驱动，但是依然支持synaptics, evdev驱动配置．　如果因为升级导致支持驱动自动变为libinput，则可以重新安装evdev驱动然后调整配置文件还原回来．我就是这样的，因为，我考虑到毕竟libinput刚出来可能不是很稳定，再者，之前都是针对evdev的配置，所以不想又挨个儿修改配置,于是继续使用evden作为小红点的配置．&lt;br&gt;
    
    </summary>
    
      <category term="linux" scheme="https://egene-huang.github.io/categories/linux/"/>
    
    
      <category term="arch" scheme="https://egene-huang.github.io/tags/arch/"/>
    
      <category term="thinkpad" scheme="https://egene-huang.github.io/tags/thinkpad/"/>
    
      <category term="linux" scheme="https://egene-huang.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Spring Data 框架整合2</title>
    <link href="https://egene-huang.github.io/2017/01/07/sping-frame2/"/>
    <id>https://egene-huang.github.io/2017/01/07/sping-frame2/</id>
    <published>2017-01-07T09:43:07.000Z</published>
    <updated>2017-02-17T13:41:34.238Z</updated>
    
    <content type="html"><![CDATA[<p>继续 Spring Data 框架整合:<br>将上述依赖jar下载到本地 maven仓库后,配置 <code>Spring MVC</code> 容器配置文件, 这里的配置文件名字最好与<code>web.xml</code>配置的<code>spring mvc servlet</code>名字保持一致, 因为框架很多地方是有约定大于规范的.这个配置文件大致包含了两部分:    </p>
<ul>
<li>action 视图控制层类自动注入.</li>
<li>视图解析器配置以及视图文件识别规范      </li>
</ul>
<a id="more"></a>
<p>spring mvc 配置文件如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd</span></div><div class="line"> 	http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd</div><div class="line"> 	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd"&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--&lt;context:component-scan base-package="com.soccer.bat.controller" /&gt;--&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--  spring mvc controller --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.soccer.bat"</span> <span class="attr">use-default-filters</span>=<span class="string">"false"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">context:include-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.web.bind.annotation.ControllerAdvice"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span> /&gt;</span></div><div class="line">    </div><div class="line">    <span class="comment">&lt;!-- For static resources --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/image/**"</span> <span class="attr">location</span>=<span class="string">"/images/"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/js/**"</span> <span class="attr">location</span>=<span class="string">"/js/"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">mapping</span>=<span class="string">"/css/**"</span> <span class="attr">location</span>=<span class="string">"/css/"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>/WEB-INF/views/<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>.jsp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后开始配置 <code>web.xml</code>文件,这里是容器启动初始化的依据, 内容如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"2.4"</span></span></div><div class="line">         <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/j2ee"</span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/j2ee</span></div><div class="line"></div><div class="line">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>spring mvc<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!--  初始化spring context--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:/spring/applicationContext.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- spring全局监听 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.util.IntrospectorCleanupListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>OpenEntityManagerInViewFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>entityManagerFactoryBeanName<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>entityManagerFactory<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>OpenEntityManagerInViewFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Spring character encoding filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Spring character encoding filter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring-mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span></div><div class="line">            org.springframework.web.servlet.DispatcherServlet</div><div class="line">        <span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath*:spring/spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>spring-mvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后配置spring容器配置文件和 JPA支持. 就是<code>web.xml</code> 初始化参数的指定的配置文件 – applicationContext.xml 内容如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></div><div class="line">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">       <span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span></div><div class="line">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></div><div class="line">       <span class="attr">xmlns:jpa</span>=<span class="string">"http://www.springframework.org/schema/data/jpa"</span></div><div class="line">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></div><div class="line">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></div><div class="line">       <span class="attr">xmlns:util</span>=<span class="string">"http://www.springframework.org/schema/util"</span></div><div class="line">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd</span></div><div class="line">        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.1.xsd</div><div class="line">        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.1.xsd</div><div class="line">        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd</div><div class="line">        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.1.xsd</div><div class="line">        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.1.xsd</div><div class="line">        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.3.xsd"&gt;</div><div class="line"></div><div class="line">    <span class="comment">&lt;!--&lt;context:annotation-config/&gt;--&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;context:component-scan base-package="com.soccer.bat"/&gt;--&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 自动扫描去除controller --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.soccer.bat.**"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">context:exclude-filter</span> <span class="attr">type</span>=<span class="string">"annotation"</span> <span class="attr">expression</span>=<span class="string">"org.springframework.stereotype.Controller"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">context:property-placeholder</span> <span class="attr">location</span>=<span class="string">"classpath*:/application.properties"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"org.apache.commons.dbcp.BasicDataSource"</span> <span class="attr">destroy-method</span>=<span class="string">"close"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Connection Info --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.driver&#125;"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.url&#125;"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.username&#125;"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.password&#125;"</span> /&gt;</span></div><div class="line"></div><div class="line">        <span class="comment">&lt;!-- Connection Pooling Info --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxActive"</span> <span class="attr">value</span>=<span class="string">"$&#123;dbcp.maxActive&#125;"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"maxIdle"</span> <span class="attr">value</span>=<span class="string">"$&#123;dbcp.maxIdle&#125;"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"defaultAutoCommit"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 连接Idle一个小时后超时 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"timeBetweenEvictionRunsMillis"</span> <span class="attr">value</span>=<span class="string">"60000"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"minEvictableIdleTimeMillis"</span> <span class="attr">value</span>=<span class="string">"60000"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"hibernateJpaVendorAdapter"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"showSql"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"database"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>MYSQL<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"entityManagerFactory"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"packagesToScan"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.soccer.bat.model<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jpaVendorAdapter"</span> <span class="attr">ref</span>=<span class="string">"hibernateJpaVendorAdapter"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jpaProperties"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.current_session_context_class"</span>&gt;</span>thread<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.hbm2ddl.auto"</span>&gt;</span>validate<span class="tag">&lt;/<span class="name">prop</span>&gt;</span><span class="comment">&lt;!-- validate/update/create --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.show_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.format_sql"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">                <span class="comment">&lt;!-- 建表的命名规则 --&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"hibernate.ejb.naming_strategy"</span>&gt;</span>org.hibernate.cfg.ImprovedNamingStrategy<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 自动扫描并注入Spring Data JPA --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">jpa:repositories</span> <span class="attr">base-package</span>=<span class="string">"com.soccer.bat.repository.**"</span></span></div><div class="line">                      <span class="attr">entity-manager-factory-ref</span>=<span class="string">"entityManagerFactory"</span></div><div class="line">                      <span class="attr">transaction-manager-ref</span>=<span class="string">"transactionManager"</span>&gt;</div><div class="line">    <span class="tag">&lt;/<span class="name">jpa:repositories</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 配置事务管理器 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.JpaTransactionManager"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"entityManagerFactory"</span> <span class="attr">ref</span>=<span class="string">"entityManagerFactory"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">tx:annotation-driven</span> <span class="attr">transaction-manager</span>=<span class="string">"transactionManager"</span> <span class="attr">proxy-target-class</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"</span> /&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 启动对@AspectJ（面向切面）注解的支持--&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">aop:aspectj-autoproxy</span> /&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<p>这里需要注意配置包扫描路径,需要使用<code>**</code>来匹配某一个包下的所有包. 在这里我折腾了一天,以为他懂我意思呢,结果…  说出来都是泪 ~~~</p>
<p>接着配置数据源参数,例如mysql驱动/数据库访问用户名和密码等,内容如下:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#jdbc配置</div><div class="line">jdbc.driver=com.mysql.jdbc.Driver</div><div class="line">#jdbc.url=jdbc:mysql://172.17.70.244:3306/soccer?characterEncoding=UTF-8</div><div class="line">jdbc.url=jdbc:mysql://127.0.0.1:3306/soccer</div><div class="line">jdbc.username=root</div><div class="line">jdbc.password=root</div><div class="line">dbcp.maxIdle=5</div><div class="line">dbcp.maxActive=40</div></pre></td></tr></table></figure></p>
<p>然后是<code>logback</code>日志配置,方便查看启动信息,如果启动异常,随时可以在控制台查看启动日志便于排查. 我这里配置的很简单, 内容如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">"Console"</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.core.ConsoleAppender"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">Target</span>&gt;</span>System.out<span class="tag">&lt;/<span class="name">Target</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yy-MM-dd HH:mm:ss&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">filter</span> <span class="attr">class</span>=<span class="string">"ch.qos.logback.classic.filter.ThresholdFilter"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">level</span>&gt;</span>DEBUG<span class="tag">&lt;/<span class="name">level</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"com.soccer.bat"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">"org.springframework"</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">"DEBUG"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">"Console"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后可以启动项目,如果没有问题可以尝试编写一个测试类,测试是否可以从数据库中查询到需要的数据. 我这里的数据持久层借口直接继承的是<code>Repository</code>标记接口,因为我暂时用不上JPA提供的方便方法.<br>至此,我的第一次整合框架之旅就结束了,总体上来看还算是顺利的,主要在以下几个地方耗时严重:</p>
<ul>
<li>spring mvc 和 spring applicationContext配置文件的命名空间上折腾好了好久, tomcat启动总是提示不能解析这些文件头,最后在网上找一个一个改了改才好.</li>
<li>spring包扫描路径的配置, 不知道需要配置 <code>**</code>才生效.</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;继续 Spring Data 框架整合:&lt;br&gt;将上述依赖jar下载到本地 maven仓库后,配置 &lt;code&gt;Spring MVC&lt;/code&gt; 容器配置文件, 这里的配置文件名字最好与&lt;code&gt;web.xml&lt;/code&gt;配置的&lt;code&gt;spring mvc servlet&lt;/code&gt;名字保持一致, 因为框架很多地方是有约定大于规范的.这个配置文件大致包含了两部分:    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;action 视图控制层类自动注入.&lt;/li&gt;
&lt;li&gt;视图解析器配置以及视图文件识别规范      &lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="spring" scheme="https://egene-huang.github.io/categories/spring/"/>
    
    
      <category term="java" scheme="https://egene-huang.github.io/tags/java/"/>
    
      <category term="spring mvc" scheme="https://egene-huang.github.io/tags/spring-mvc/"/>
    
      <category term="spring data jpa" scheme="https://egene-huang.github.io/tags/spring-data-jpa/"/>
    
  </entry>
  
  <entry>
    <title>Spring Data 框架整合</title>
    <link href="https://egene-huang.github.io/2017/01/07/spring-frame/"/>
    <id>https://egene-huang.github.io/2017/01/07/spring-frame/</id>
    <published>2017-01-07T08:44:07.000Z</published>
    <updated>2017-02-17T13:41:34.238Z</updated>
    
    <content type="html"><![CDATA[<p>工作三年, 一直在写java代码,一直也没有自己一个人从无到有的搭建一套java web框架, 因为工作中,也都是别人准备好项目开发环境, 然后我再在上面写代码,平时我也没有正经花时间在上面,java web框架很多, jar相互之间的依赖和冲突也比较厉害, 这些问题纠缠在一起, 让我望而却步. 一直想尝试自己一个人整合一套java web框架然后在上面开发,一次偶然的机会迫使我不得不自己动手搭建一套可以快速开发的java web框架, 借这次机会我准备使用 <code>Spring MVC + Spring Data JPA</code> 开发web应用.  不出意外,其过程虽然不是很顺利,不过最终总算是不负众望,已经可以投入使用, 其实这里面需要配置的不是很多,更多的时候jar版本的选择比较麻烦.</p>
<a id="more"></a>
<p>项目整体的结构如下:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">soccer/</div><div class="line">├── parent</div><div class="line">│   ├── parent.iml</div><div class="line">│   └── pom.xml</div><div class="line">├── pom.xml</div><div class="line">├── soccer-bat</div><div class="line">│   ├── pom.xml</div><div class="line">│   ├── soccer-bat.iml</div><div class="line">│   └── src</div><div class="line">│       ├── main</div><div class="line">│       │   ├── java</div><div class="line">│       │   │   └── com</div><div class="line">│       │   │       └── soccer</div><div class="line">│       │   │           └── bat</div><div class="line">│       │   │               ├── controller</div><div class="line">│       │   │               │   └── TestController.java</div><div class="line">│       │   │               ├── domain</div><div class="line">│       │   │               │   └── UserService.java</div><div class="line">│       │   │               ├── model</div><div class="line">│       │   │               │   └── User.java</div><div class="line">│       │   │               └── repository</div><div class="line">│       │   │                   └── UserRepository.java</div><div class="line">│       │   ├── resources</div><div class="line">│       │   │   ├── application.properties</div><div class="line">│       │   │   ├── css</div><div class="line">│       │   │   ├── images</div><div class="line">│       │   │   ├── js</div><div class="line">│       │   │   ├── logback.xml</div><div class="line">│       │   │   └── spring</div><div class="line">│       │   │       ├── applicationContext.xml</div><div class="line">│       │   │       └── spring-mvc.xml</div><div class="line">│       │   └── webapp</div><div class="line">│       │       ├── index.jsp</div><div class="line">│       │       ├── META-INF</div><div class="line">│       │       │   └── jpa-named-queries.properties</div><div class="line">│       │       └── WEB-INF</div><div class="line">│       │           ├── views</div><div class="line">│       │           │   └── hello.jsp</div><div class="line">│       │           └── web.xml</div><div class="line">│       └── <span class="built_in">test</span></div><div class="line">│           ├── java</div><div class="line">│           └── resources</div><div class="line">└── soccer.iml</div></pre></td></tr></table></figure></p>
<p>整合这两个框架大概分为两部分:</p>
<ul>
<li>首先整合 <code>Spring MVC</code></li>
<li>在这基础之上再添加数据持久层框架<code>Spring Data JPA</code>     </li>
</ul>
<p>新建一个maven项目,使用idea的话,可以选择自带maven webapp模板将自动生成maven webapp项目目录结构.<br>然后在项目<code>pom</code>文件中添加以上框架jar, 我使用了一个专门的模块来管理其他模块依赖的公共jar. [parent]<br>在其他模块只要将[parent]引入进来就可以使用这些公共jar了. parent模块 <code>pom</code>文件如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.soccer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>soccer :: parent<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.2.Release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.2.Release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.2.release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.2.Release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjrt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.aspectj<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aspectjweaver<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aspects<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.javax.persistence<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-jpa-2.1-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0.Draft-16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.3.Release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-orm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-entitymanager<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.6.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.data<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-fileupload<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit-dep<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet.jsp.jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet.jsp.jstl-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.glassfish.web<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl-impl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.commons<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-lang3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.12<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>20030825.184428<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-pool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-pool<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>20030825.183949<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0-alpha-1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.3.10.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-access<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.8<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!--        &lt;dependency&gt;</span></div><div class="line">            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;logback&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;0.5&lt;/version&gt;</div><div class="line">        &lt;/dependency&gt;--&gt;</div><div class="line"></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.logback-extensions<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-ext-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.1.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<p>然后<code>soccer-bat</code> 模块需要依赖<code>parent</code>模块, <code>pom</code>文件如下:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.soccer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>soccer-bat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>soccer-bat<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.apache.org<span class="tag">&lt;/<span class="name">url</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--    &lt;dependencies&gt;</span></div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;junit&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;3.8.1&lt;/version&gt;</div><div class="line">            &lt;scope&gt;test&lt;/scope&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;--&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>soccer-bat<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.codehaus.mojo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">path</span>&gt;</span>/soccer-bat<span class="tag">&lt;/<span class="name">path</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="comment">&lt;!-- war打包插件, 设定war包名称不带版本号 --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">warName</span>&gt;</span>soccer-bat<span class="tag">&lt;/<span class="name">warName</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">webappDirectory</span>&gt;</span>$&#123;basedir&#125;/src/main/webapp<span class="tag">&lt;/<span class="name">webappDirectory</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">warSourceDirectory</span>&gt;</span>$&#123;basedir&#125;/src/main/webapp<span class="tag">&lt;/<span class="name">warSourceDirectory</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>剩下部分在Spring Data 框架整合2.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;工作三年, 一直在写java代码,一直也没有自己一个人从无到有的搭建一套java web框架, 因为工作中,也都是别人准备好项目开发环境, 然后我再在上面写代码,平时我也没有正经花时间在上面,java web框架很多, jar相互之间的依赖和冲突也比较厉害, 这些问题纠缠在一起, 让我望而却步. 一直想尝试自己一个人整合一套java web框架然后在上面开发,一次偶然的机会迫使我不得不自己动手搭建一套可以快速开发的java web框架, 借这次机会我准备使用 &lt;code&gt;Spring MVC + Spring Data JPA&lt;/code&gt; 开发web应用.  不出意外,其过程虽然不是很顺利,不过最终总算是不负众望,已经可以投入使用, 其实这里面需要配置的不是很多,更多的时候jar版本的选择比较麻烦.&lt;/p&gt;
    
    </summary>
    
      <category term="spring" scheme="https://egene-huang.github.io/categories/spring/"/>
    
    
      <category term="java" scheme="https://egene-huang.github.io/tags/java/"/>
    
      <category term="spring mvc" scheme="https://egene-huang.github.io/tags/spring-mvc/"/>
    
      <category term="spring data jpa" scheme="https://egene-huang.github.io/tags/spring-data-jpa/"/>
    
  </entry>
  
  <entry>
    <title>git-学习</title>
    <link href="https://egene-huang.github.io/2017/01/06/git-learn/"/>
    <id>https://egene-huang.github.io/2017/01/06/git-learn/</id>
    <published>2017-01-06T15:48:59.000Z</published>
    <updated>2017-02-23T13:47:49.096Z</updated>
    
    <content type="html"><![CDATA[<p>在java开发过程中,不出意外大家都会使用各种IDE(集成开发环境)搭建项目然后进行开发, 各种IDE为了更好的管理当前项目,让开发人员更高效的开发,都会针对当前项目生成一些类似索引或者项目配置的文件或者目录. 例如 <a href="http://www.jetbrains.com/idea/" target="_blank" rel="external">IntelliJ IDEA</a> 会生成 <code>.idea</code> 目录用来管理整个<code>project</code>,和<code>.iml</code> 文件用来管理当前 <code>Module</code>.</p>
<a id="more"></a>
<p>所以 我们在使用<code>git</code>来协作开发的时候并不希望这些文件跟随这版本一起出现在大家的视野中, 不仅仅这些文件或目录开发的web应用没有作用,更重要的是会搞乱大家的工作环境,因为一个项目组完全可能出现两种以上的<code>IDE</code>.<br>所以需要在<code>git</code>版本中过滤这些目录或文件.</p>
<p>一般,采用<code>git</code>提供方式: 将需要忽略的文件或目录添加到 <code>.gitignore</code>文件中,这时候,使用<code>git</code>命令查看 <code>change list</code>时,被忽略文件则不会出现在待提交列表里. <code>git status</code></p>
<p><code>.gitignore</code>文件内容类似这样的</p>
<pre>
*.iml
.idea   
db.json   
/target/       
*.log    
blog/node_modules/    
blog/public/   
blog/themes/    
.deploy*/
</pre>

<p>如果需要将版本控制内文件或目录添加到该文件内,进而去除该文件或目录的版本跟踪,则需要先将被忽略文件或目录添加到<code>.gitignore</code>后还需要以下步骤:<br>删除cache</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm -r --cached  /ignorepath/</div></pre></td></tr></table></figure>
<p>提交<code>.gitignore</code>文件<br><code><br>git add .gitignore<br>git commit -m “message”<br></code></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在java开发过程中,不出意外大家都会使用各种IDE(集成开发环境)搭建项目然后进行开发, 各种IDE为了更好的管理当前项目,让开发人员更高效的开发,都会针对当前项目生成一些类似索引或者项目配置的文件或者目录. 例如 &lt;a href=&quot;http://www.jetbrains.com/idea/&quot;&gt;IntelliJ IDEA&lt;/a&gt; 会生成 &lt;code&gt;.idea&lt;/code&gt; 目录用来管理整个&lt;code&gt;project&lt;/code&gt;,和&lt;code&gt;.iml&lt;/code&gt; 文件用来管理当前 &lt;code&gt;Module&lt;/code&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="git" scheme="https://egene-huang.github.io/categories/git/"/>
    
    
      <category term="git github" scheme="https://egene-huang.github.io/tags/git-github/"/>
    
  </entry>
  
  <entry>
    <title>2016,我成长啦!</title>
    <link href="https://egene-huang.github.io/2017/01/01/growing-year/"/>
    <id>https://egene-huang.github.io/2017/01/01/growing-year/</id>
    <published>2017-01-01T13:49:34.000Z</published>
    <updated>2017-01-01T15:18:49.421Z</updated>
    
    <content type="html"><![CDATA[<p>2016结束啦，　回想这一年，我自己能感觉到自己的进步，我自己还是很为自己高兴的，因为我相比之前确实成长了．口头表扬下我自己，~(#_#)~ 我也发现了自己很多的毛病，长期的自闭，导致自己不善于交流，甚至变得有些严重的玻璃心，不知道怎么去跟人相处，不知道怎么做事和做人，因为这并不像写代码，虽然复杂，但是终归是有固定的逻辑的．</p>
<a id="more"></a>
<p>以下是我16年进步清单#(-)_(-)#:</p>
<ol>
<li>坚持学习英语，背单词，哪怕每天50个;</li>
<li>重新学习了javaScript ;</li>
<li>学习node.js/express等web框架/npm包管理工具/模板引擎/认识了mongodb非关系型数据库;</li>
<li>过度到Arch下工作包括日常使用,学习到了更多的linux知识,学会了如何通过Wiki解决问题;</li>
<li>搭建了属于自己的<a href="https://egene-huang.github.io">博客</a> ;</li>
<li>学习并使用持续集成工具[Jenkins]自动部署公司项目代码 ;</li>
<li>大概的知道了如何更好的与人交流,还需要多向别人学习;</li>
</ol>
<p>在这一年，我就像是刚进入幼儿园的小朋友一样，感觉一切都是新鲜的，学会就会觉得自己很了不起，但是每每想起自己年龄的时候就像是被人扔进并窟窿里．所以，我经常感叹我之前２０多年都TM干嘛去了，白活了，很多人劝我往前看，其实我怎会不懂呢，只是我真的不甘心，上天给我和其他同样的时间搬砖，谁搬得多谁就能得到更多的报酬，但是人家都来来回回搬了很多次了，我ＴＭＤ还在原地傻呵呵的玩儿泥巴.想想就可气!！　</p>
<p>但是也只是气气自己,时刻警告自己跟别人差距有多大，我要更多的努力才行．以后要学习的东西，就眼前的还有很多，对我来说尽可能的不浪费时间很重要，继续前行，不管前面是狂风还是暴雨，请不再逃避!</p>
<p>我的2017计划，希望不会夭折，努力吧，骚年!</p>
<ol>
<li>继续学习英语，在继续单词记忆的基础上重点是语法的学习;</li>
<li>学习中文，练习说话技巧 ;</li>
<li>继续深入学习java &amp; javaweb，学习python, 更深入的学习javascript ;</li>
<li>保持凡事多思考的习惯．　加油！　你会变得更好的！　以后的路还很长!!!</li>
<li>抽时间读文学类的书籍，尽可能的提升自己的修养．这很重要．</li>
<li>注意锻炼身体，不想早死就尽快让自己成长，远离北京吧！！！</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;2016结束啦，　回想这一年，我自己能感觉到自己的进步，我自己还是很为自己高兴的，因为我相比之前确实成长了．口头表扬下我自己，~(#_#)~ 我也发现了自己很多的毛病，长期的自闭，导致自己不善于交流，甚至变得有些严重的玻璃心，不知道怎么去跟人相处，不知道怎么做事和做人，因为这并不像写代码，虽然复杂，但是终归是有固定的逻辑的．&lt;/p&gt;
    
    </summary>
    
    
      <category term="年终总结" scheme="https://egene-huang.github.io/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>Linux命令整理</title>
    <link href="https://egene-huang.github.io/2016/12/27/linux-command/"/>
    <id>https://egene-huang.github.io/2016/12/27/linux-command/</id>
    <published>2016-12-27T02:51:37.000Z</published>
    <updated>2016-12-30T14:21:52.882Z</updated>
    
    <content type="html"><![CDATA[<p> 整理工作中常用的linux命令, 方便查询, 也算是总结, 利人利己, 虽然不是专业运维,工作中也时常需要临时充当一下运维的角色, 所以记录一下,  这里面可能会包含 <code>arch</code> 的一些特殊命令, 不过会有特殊标记.</p>
<a id="more"></a>
<h3 id="Linux-常用命令整理"><a href="#Linux-常用命令整理" class="headerlink" title="Linux 常用命令整理"></a>Linux 常用命令整理</h3><h4 id="新建目录"><a href="#新建目录" class="headerlink" title="新建目录"></a>新建目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir dir</div></pre></td></tr></table></figure>
<h4 id="新建多级目录"><a href="#新建多级目录" class="headerlink" title="新建多级目录"></a>新建多级目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir -p dir/xxx</div></pre></td></tr></table></figure>
<h4 id="新建多个目录"><a href="#新建多个目录" class="headerlink" title="新建多个目录"></a>新建多个目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir &#123;d1,d2&#125;</div></pre></td></tr></table></figure>
<h4 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm f1</div></pre></td></tr></table></figure>
<h4 id="强制删除文件-无提示"><a href="#强制删除文件-无提示" class="headerlink" title="强制删除文件[无提示]"></a>强制删除文件[无提示]</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -rf f1</div></pre></td></tr></table></figure>
<h4 id="删除目录"><a href="#删除目录" class="headerlink" title="删除目录"></a>删除目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -r dir/</div></pre></td></tr></table></figure>
<h4 id="删除多个目录"><a href="#删除多个目录" class="headerlink" title="删除多个目录"></a>删除多个目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rm -r &#123;dir1, dir2&#125;</div></pre></td></tr></table></figure>
<h4 id="ssh登录远程主机"><a href="#ssh登录远程主机" class="headerlink" title="ssh登录远程主机"></a>ssh登录远程主机</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh user@host</div></pre></td></tr></table></figure>
<h4 id="ssh登录远程主机-指定端口号"><a href="#ssh登录远程主机-指定端口号" class="headerlink" title="ssh登录远程主机[指定端口号]"></a>ssh登录远程主机[<em>指定端口号</em>]</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh user@host -p port</div></pre></td></tr></table></figure>
<h4 id="本地复制文件"><a href="#本地复制文件" class="headerlink" title="本地复制文件"></a>本地复制文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp cpfile /targetpath/xx/</div></pre></td></tr></table></figure>
<h4 id="本地复制文件夹"><a href="#本地复制文件夹" class="headerlink" title="本地复制文件夹"></a>本地复制文件夹</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -r cpdir /targetpath/xxx</div></pre></td></tr></table></figure>
<h4 id="本地上传文件到远程主机"><a href="#本地上传文件到远程主机" class="headerlink" title="本地上传文件到远程主机"></a>本地上传文件到远程主机</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp localfile user@host:/targetpath/</div></pre></td></tr></table></figure>
<h4 id="本地上传文件到远程主机-指定端口访问"><a href="#本地上传文件到远程主机-指定端口访问" class="headerlink" title="本地上传文件到远程主机[指定端口访问]"></a>本地上传文件到远程主机[<em>指定端口访问</em>]</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp -P port localfile user@host:/targetpath/</div></pre></td></tr></table></figure>
<h4 id="本地上传文件夹到远程主机-指定端口访问"><a href="#本地上传文件夹到远程主机-指定端口访问" class="headerlink" title="本地上传文件夹到远程主机[指定端口访问]"></a>本地上传文件夹到远程主机[<em>指定端口访问</em>]</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp -P port -r localdir user@host:/targetpath/</div></pre></td></tr></table></figure>
<p>—- END 以后用到了再补充</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt; 整理工作中常用的linux命令, 方便查询, 也算是总结, 利人利己, 虽然不是专业运维,工作中也时常需要临时充当一下运维的角色, 所以记录一下,  这里面可能会包含 &lt;code&gt;arch&lt;/code&gt; 的一些特殊命令, 不过会有特殊标记.&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="https://egene-huang.github.io/categories/linux/"/>
    
    
      <category term="arch" scheme="https://egene-huang.github.io/tags/arch/"/>
    
      <category term="linux" scheme="https://egene-huang.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>初次学习mongodb</title>
    <link href="https://egene-huang.github.io/2016/11/21/mongodb/"/>
    <id>https://egene-huang.github.io/2016/11/21/mongodb/</id>
    <published>2016-11-21T06:22:04.000Z</published>
    <updated>2016-11-21T13:15:39.142Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MongoDB安装"><a href="#MongoDB安装" class="headerlink" title="MongoDB安装"></a>MongoDB安装</h2><p>学习node快接近尾声了, 想使用express+ejs+mongoDB 完成一个小栗子, 算是我学习node的一个结业考试.  不过,之前从来没有接触过mongodb,对我这小小白来说, 安装-启动mongodb都异常的艰难,  想想真是 …  铁窗呀 ~~  铁门 ~  铁锁链 ~~~  路过的你们请尽情嘲笑吧 ,  我不怕!!!!</p>
<a id="more"></a>
<p>在mongodb官网的<a href="https://docs.mongodb.com/manual/administration/install-on-linux/" target="_blank" rel="external">安装指南</a> 上没有找到 <code>ArchLinux</code>版本的安装包, 所以通过下载安装包解压使用是不太可能了, 只能自己下载源码编译安装或者看看<code>Arch</code> 官方仓库或<a href="https://wiki.archlinux.org/index.php/Arch_User_Repository" target="_blank" rel="external"><code>AUR</code></a>仓库有没有了, 不过丰富的软件支持在<code>Arch</code>里从来不是问题,! <code>Arch</code>官方仓库有, <code>AUR</code>仓库也有.  如:</p>
<p><strong> pacman</strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">[palm@arch]: ~/myapps/node-web-learn&gt;$ sudo pacman -Ss MongoDB</div><div class="line">[sudo] password <span class="keyword">for</span> palm: </div><div class="line">community/libmongoc 1.4.2-1</div><div class="line">    A client library written <span class="keyword">in</span> C <span class="keyword">for</span> MongoDB</div><div class="line">community/mongodb 3.2.10-2</div><div class="line">    A high-performance, open <span class="built_in">source</span>, schema-free document-oriented database</div><div class="line">community/mongodb-tools 3.2.5-1</div><div class="line">    The MongoDB tools provide import, <span class="built_in">export</span>, and diagnostic capabilities.</div><div class="line">community/php-mongodb 1.1.9-1</div><div class="line">    MongoDB driver <span class="keyword">for</span> PHP</div><div class="line">community/python-pymongo 3.3.1-1</div><div class="line">    Python module <span class="keyword">for</span> using MongoDB</div><div class="line">community/python2-pymongo 3.3.1-1</div><div class="line">    Python module <span class="keyword">for</span> using MongoDB</div></pre></td></tr></table></figure></p>
<p><strong> AUR </strong><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div></pre></td><td class="code"><pre><div class="line">[palm@arch]: ~/myapps/node-web-learn&gt;$ yaourt -Ss MongoDB</div><div class="line">community/libmongoc 1.4.2-1</div><div class="line">    A client library written <span class="keyword">in</span> C <span class="keyword">for</span> MongoDB</div><div class="line">community/mongodb 3.2.10-2</div><div class="line">    A high-performance, open <span class="built_in">source</span>, schema-free document-oriented database</div><div class="line">community/mongodb-tools 3.2.5-1</div><div class="line">    The MongoDB tools provide import, <span class="built_in">export</span>, and diagnostic capabilities.</div><div class="line">community/php-mongodb 1.1.9-1</div><div class="line">    MongoDB driver <span class="keyword">for</span> PHP</div><div class="line">community/python-pymongo 3.3.1-1</div><div class="line">    Python module <span class="keyword">for</span> using MongoDB</div><div class="line">community/python2-pymongo 3.3.1-1</div><div class="line">    Python module <span class="keyword">for</span> using MongoDB</div><div class="line">aur/adminer-git 4.2.5.r0.g53dfafd-1 (2) (0.01)</div><div class="line">    a web based SQL management tool supporting MySQL, PostgreSQL, SQLite, MS SQL, Oracle, Firebird, SimpleDB, Elasticsearch and MongoDB. Formerly phpM<span class="keyword">in</span>Admin.</div><div class="line">aur/cube-git 20140730-1 (0) (0.00)</div><div class="line">    A system <span class="keyword">for</span> analyzing time series data using MongoDB and Node</div><div class="line">aur/fluent-plugin-mongo 0.7.7-1 (0) (0.00)</div><div class="line">    MongoDB plugin <span class="keyword">for</span> Fluent event collector</div><div class="line">aur/graylog 2.1.2-2 (3) (0.00)</div><div class="line">    Graylog is an open <span class="built_in">source</span> syslog implementation that stores your logs <span class="keyword">in</span> ElasticSearch and MongoDB</div><div class="line">aur/libmongo-client 0.1.8-1 (0) (0.00)</div><div class="line">    Alternative C driver <span class="keyword">for</span> MongoDB (obsolete)</div><div class="line">aur/mongo-cxx-driver r3.0.0-1 (Out of Date) (5) (1.24)</div><div class="line">    The official MongoDB C++ driver library</div><div class="line">aur/mongo-cxx-driver-legacy 1.1.2-1 (6) (0.00)</div><div class="line">    Official MongoDB C++ driver (legacy).</div><div class="line">aur/mongo-cxx-driver-legacy-0.0-26compat 2.6.12-1 (6) (0.00)</div><div class="line">    Official MongoDB C++ driver (26compat).</div><div class="line">aur/mongo_fdw 4.0.0-2 (1) (0.00)</div><div class="line">    PostgreSQL foreign data wrapper <span class="keyword">for</span> MongoDB</div><div class="line">aur/mongobooster 3.0.3-1 (Out of Date) (3) (0.87)</div><div class="line">    The Smartest MongoDB Admin GUI</div><div class="line">aur/mongoclient 1.3.0-1 (1) (0.09)</div><div class="line">    MongoDB administration client</div><div class="line">aur/perl-bson 0.11-1 (1) (0.00)</div><div class="line">    Pure Perl implementation of MongoDB<span class="string">'s BSON serialization</span></div><div class="line">aur/perl-mojolicious-plugin-mongodb 1.16-1 (0) (0.00)</div><div class="line">    Use MongoDB in Mojolicious</div><div class="line">aur/perl-mongodb 1.2.3-1 (3) (0.00)</div><div class="line">    Official MongoDB Driver for Perl</div><div class="line">aur/perl-mongodbx-autoderef 1.110560-1 (0) (0.00)</div><div class="line">    Automagically dereference MongoDB DBRefs lazily</div><div class="line">aur/php53-mongo 1.5.8-1 (1) (0.00)</div><div class="line">    Officially supported PHP 5.3 driver for MongoDB</div><div class="line">aur/python-flask-pymongo 0.4.0-1 (1) (0.00)</div><div class="line">    Flask-PyMongo bridges Flask and PyMongo, so that you can use Flask’s normal mechanisms to configure and connect to MongoDB.</div><div class="line">aur/python-monary-hg 0.3.0.r69.efc4072b9b7f-1 (1) (0.00)</div><div class="line">    Perform high-performance column queries from MongoDB for Python 3. 10x speedup over pymongo alone.</div><div class="line">aur/python-mongoengine 0.10.6-2 (0) (0.00)</div><div class="line">    An object-document mapper for MongoDB.</div><div class="line">aur/python2-dex 0.5.5-1 (0) (0.00)</div><div class="line">    A MongoDB performance tuning tool that compares queries to the available indexes in the queried collection(s) and generates index suggestions based on simple heuristics.</div><div class="line">aur/python2-flask-pymongo 0.4.0-1 (1) (0.00)</div><div class="line">    Flask-PyMongo bridges Flask and PyMongo, so that you can use Flask’s normal mechanisms to configure and connect to MongoDB.</div><div class="line">aur/python2-monary-hg 0.3.0.r69.efc4072b9b7f-1 (1) (0.00)</div><div class="line">    Perform high-performance column queries from MongoDB for Python 2. 10x speedup over pymongo alone.</div><div class="line">aur/python2-pymongo-2.9 2.9-1 (0) (0.00)</div><div class="line">    Python driver for MongoDB</div><div class="line">aur/robomongo 0.9.0-1 (70) (4.08)</div><div class="line">    Shell-centric cross-platform open source MongoDB management tool</div><div class="line">aur/robomongo-bin 0.9.0-1 (20) (1.54)</div><div class="line">    Shell-centric cross-platform open source MongoDB management tool</div><div class="line">aur/ros-indigo-moveit-ros-warehouse 0.6.5-2 (0) (0.00)</div><div class="line">    ROS - Components of MoveIt connecting to MongoDB.</div><div class="line">aur/ros-indigo-warehouse-ros 0.8.8-4 (0) (0.00)</div><div class="line">    ROS - Persistent storage of ROS data using MongoDB.</div><div class="line">aur/umongo 1.6.2-1 (40) (1.18)</div><div class="line">    This package provides a GUI app that can browse and administer a MongoDB cluster</div><div class="line">[palm@arch]: ~/myapps/node-web-learn&gt;$ sudo pacman -Ss MongoDB</div><div class="line">[sudo] password for palm: </div><div class="line">community/libmongoc 1.4.2-1</div><div class="line">    A client library written in C for MongoDB</div><div class="line">community/mongodb 3.2.10-2</div><div class="line">    A high-performance, open source, schema-free document-oriented database</div><div class="line">community/mongodb-tools 3.2.5-1</div><div class="line">    The MongoDB tools provide import, export, and diagnostic capabilities.</div><div class="line">community/php-mongodb 1.1.9-1</div><div class="line">    MongoDB driver for PHP</div><div class="line">community/python-pymongo 3.3.1-1</div><div class="line">    Python module for using MongoDB</div><div class="line">community/python2-pymongo 3.3.1-1</div><div class="line">    Python module for using MongoDB</div></pre></td></tr></table></figure></p>
<p>随便挑选一个安装就可以了.</p>
<h2 id="使用MongoDB"><a href="#使用MongoDB" class="headerlink" title="使用MongoDB"></a>使用MongoDB</h2><p>软件找到了以后, 然后找到<code>mongodb</code> node.js的<a href="http://mongodb.github.io/node-mongodb-native/2.2/installation-guide/" target="_blank" rel="external">支持指南</a> 按照指南安装好node.js的mongodb驱动包,然后编写一个小demo测试一下, <a href="http://mongodb.github.io/node-mongodb-native/2.2/quick-start/" target="_blank" rel="external">Quick Start</a>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var MongoClient = require(&apos;mongodb&apos;).MongoClient,assert = require(&apos;assert&apos;);</div><div class="line">// Connection URL</div><div class="line">var url = &apos;mongodb://localhost:27017/myproject&apos;;</div><div class="line"></div><div class="line">// Use connect method to connect to the server</div><div class="line">MongoClient.connect(url, function(err, db) &#123;</div><div class="line">  assert.equal(null, err);</div><div class="line">  console.log(&quot;Connected successfully to server&quot;);</div><div class="line"></div><div class="line">  db.close();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>接着运行 <code>node app.js</code> ,  不是我想象的那般顺利, 错误如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[palm@arch]: ~/myapps/mongodb-test&gt;$ node app.js </div><div class="line"></div><div class="line">/home/palm/myapps/mongodb-test/node_modules/mongodb/lib/mongo_client.js:225</div><div class="line">          throw err</div><div class="line">          ^</div><div class="line">AssertionError: null == &#123; MongoError: failed to connect to server [localhost:27017] on first connect</div><div class="line">    at Pool.&lt;anonymous&gt; (/home/palm/myapps/mongodb-</div><div class="line">    at /home/palm/myapps/mongodb-test/app.js:9:10</div><div class="line">    at connectCallback (/home/palm/myapps/mongodb-test/node_modules/mongodb/lib/mongo_client.js:315:5)</div><div class="line">    at /home/palm/myapps/mongodb-test/node_modules/mongodb/lib/mongo_client.js:222:11</div><div class="line">    at _combinedTickCallback (internal/process/next_tick.js:67:7)</div><div class="line">    at process._tickCallback (internal/process/next_tick.js:98:9)</div></pre></td></tr></table></figure>
<p>网络上一顿狂搜, 好像安装好以后需要指定mongodb存放数据的目录, 默认在<code>/data/db</code>  于是:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">[palm@arch]: ~/myapps/mongodb-test/data&gt;$ mongod --dbpath=/home/palm/myapps/mongodb-test/data</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] MongoDB starting : pid=13694 port=27017 dbpath=/home/palm/myapps/mongodb-test/data 64-bit host=arch</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] db version v3.2.10</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] git version: 79d9b3ab5ce20f51c272b4411202710a082d0317</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] OpenSSL version: OpenSSL 1.0.2j  26 Sep 2016</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] allocator: tcmalloc</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] modules: none</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] build environment:</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten]     distarch: x86_64</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten]     target_arch: x86_64</div><div class="line">2016-11-21T10:45:55.066+0800 I CONTROL  [initandlisten] options: &#123; storage: &#123; dbPath: <span class="string">"/home/palm/myapps/mongodb-test/data"</span> &#125; &#125;</div><div class="line">2016-11-21T10:45:55.086+0800 I STORAGE  [initandlisten] exception <span class="keyword">in</span> initAndListen: 98 Unable to create/open lock file: /home/palm/myapps/mongodb-test/data/mongod.lock errno:13 Permission denied Is a mongod instance already running?, terminating</div><div class="line">2016-11-21T10:45:55.086+0800 I CONTROL  [initandlisten] dbexit:  rc: 100</div></pre></td></tr></table></figure>
<p>大概意思是, 已经有mongodb服务在运行中,现在没有权限再创建一个mongodb实例.  然后我使用<code>ps</code> 确是查询到了很多个mongodb进程.  找到后一一都干死, 然后从<code>Archlinux Wiki</code> MongoDB篇又了解到在Archlinux中<a href="https://wiki.archlinux.org/index.php/MongoDB#Installation" target="_blank" rel="external">MongoDB安装指南</a> 需要使用<code>systemctl</code> 启动服务:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">systemctl start mongodb.service</div></pre></td></tr></table></figure>
<p>下面也有一些常用问题解决方案,例如mongodb服务异常关闭导致被锁,和mongodb使用指南, 很方便,  之前老听人说<code>Archlinux Wiki</code> 是Linux发行版最完整最详细的Wiki,  现在看来,越来越觉得确是如此, 平时archlinx 闹脾气也都是翻阅Wiki解决的. </p>
<p>这一通折腾之后, 使用<code>--repair</code>修复之前的<code>database</code> 设置, 如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongod --dbpath /home/palm/myapps/mongodb-test/data --repair</div></pre></td></tr></table></figure>
<p>然后运行<code>mongo</code> 进入mongodb命令行(MongoDB shell)并初始化数据库:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">[palm@arch]: ~/myapps/mongodb-test&gt;$ mongo</div><div class="line">MongoDB shell version: 3.2.10</div><div class="line">connecting to: <span class="built_in">test</span></div><div class="line">Welcome to the MongoDB shell.</div><div class="line">For interactive <span class="built_in">help</span>, <span class="built_in">type</span> <span class="string">"help"</span>.</div><div class="line">For more comprehensive documentation, see</div><div class="line">	http://docs.mongodb.org/</div><div class="line">Questions? Try the support group</div><div class="line">	http://groups.google.com/group/mongodb-user</div><div class="line">Server has startup warnings: </div><div class="line">2016-11-21T14:19:39.625+0800 I CONTROL  [initandlisten] </div><div class="line">2016-11-21T14:19:39.625+0800 I CONTROL  [initandlisten] ** WARNING: /sys/kernel/mm/transparent_hugepage/enabled is <span class="string">'always'</span>.</div><div class="line">2016-11-21T14:19:39.625+0800 I CONTROL  [initandlisten] **        We suggest setting it to <span class="string">'never'</span></div><div class="line">2016-11-21T14:19:39.625+0800 I CONTROL  [initandlisten] </div><div class="line">&gt;</div></pre></td></tr></table></figure>
<p>这代表mongodb服务已经成功启动了, 可以使用了, 到这里,我总算是半只脚迈进了mongodb的大门, 接下来可以在项目实践中一边学习一边使用mongodb了.</p>
<h2 id="关于设置mongodb数据存储目录"><a href="#关于设置mongodb数据存储目录" class="headerlink" title="关于设置mongodb数据存储目录"></a>关于设置mongodb数据存储目录</h2><p>在linux中,默认情况下手动安装或解压mongodb应用包后,缺少数据存储目录: </p>
<blockquote>
<p>默认为<code>/data/db</code></p>
</blockquote>
<p>这个目录最开始是不存在的,而且运行参数设定命令也不会自动帮我们新建. 所以需要提前将这个目录新建完成. 当然,这个目录是可以修改的, 使用<code>--dbpath</code> 自定义mongodb数据存储目录.  使用<code>--port arg</code> 可以自定义服务端口, 还有主机地址 host , 更多参数帮助可以使用:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongo --help</div></pre></td></tr></table></figure>
<p>查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">[palm@arch]: ~/myapps/mongodb-test&gt;$ mongo --help</div><div class="line">MongoDB shell version: 3.2.10</div><div class="line">usage: mongo [options] [db address] [file names (ending <span class="keyword">in</span> .js)]</div><div class="line">db address can be:</div><div class="line">  foo                   foo database on <span class="built_in">local</span> machine</div><div class="line">  192.169.0.5/foo       foo database on 192.168.0.5 machine</div><div class="line">  192.169.0.5:9999/foo  foo database on 192.168.0.5 machine on port 9999</div><div class="line">Options:</div><div class="line">  --shell                             run the shell after executing files</div><div class="line">  --nodb                              don<span class="string">'t connect to mongod on startup - no </span></div><div class="line">                                      'db address<span class="string">' arg expected</span></div><div class="line">  --norc                              will not run the ".mongorc.js" file on </div><div class="line">                                      start up</div><div class="line">  --quiet                             be less chatty</div><div class="line">  --port arg                          port to connect to</div><div class="line">  --host arg                          server to connect to</div><div class="line">  --eval arg                          evaluate javascript</div><div class="line">  -h [ --help ]                       show this usage information</div><div class="line">  --version                           show version information</div><div class="line">  --verbose                           increase verbosity</div><div class="line">  --ipv6                              enable IPv6 support (disabled by default)</div><div class="line">  --disableJavaScriptJIT              disable the Javascript Just In Time </div><div class="line">                                      compiler</div><div class="line">  --enableJavaScriptProtection        disable automatic JavaScript function </div><div class="line">                                      marshalling</div><div class="line">  --ssl                               use SSL for all connections</div><div class="line">  --sslCAFile arg                     Certificate Authority file for SSL</div><div class="line">  --sslPEMKeyFile arg                 PEM certificate/key file for SSL</div><div class="line">  --sslPEMKeyPassword arg             password for key in PEM file for SSL</div><div class="line">  --sslCRLFile arg                    Certificate Revocation List file for SSL</div><div class="line">  --sslAllowInvalidHostnames          allow connections to servers with </div><div class="line">                                      non-matching hostnames</div><div class="line">  --sslAllowInvalidCertificates       allow connections to servers with invalid</div><div class="line">                                      certificates</div><div class="line">  --sslFIPSMode                       activate FIPS 140-2 mode at startup</div><div class="line"></div><div class="line">Authentication Options:</div><div class="line">  -u [ --username ] arg               username for authentication</div><div class="line">  -p [ --password ] arg               password for authentication</div><div class="line">  --authenticationDatabase arg        user source (defaults to dbname)</div><div class="line">  --authenticationMechanism arg       authentication mechanism</div><div class="line">  --gssapiServiceName arg (=mongodb)  Service name to use when authenticating </div><div class="line">                                      using GSSAPI/Kerberos</div><div class="line">  --gssapiHostName arg                Remote host name to use for purpose of </div><div class="line">                                      GSSAPI/Kerberos authentication</div><div class="line"></div><div class="line">file names: a list of files to run. files have to end in .js and will exit after unless --shell is specified</div></pre></td></tr></table></figure>
<p>如果你将mongodb数据存储目录设置在非<code>/home/</code> 下,则需要注意权限,  需要让自定义目录拥有<code>-r 可读 / -w 可写 / -x 可执行</code> 的权限.</p>
<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul>
<li><a href="https://docs.mongodb.com/manual/administration/install-on-linux/" target="_blank" rel="external">Install MongoDB Community Edition on Linux</a></li>
<li><a href="http://mongodb.github.io/node-mongodb-native/2.2/quick-start/" target="_blank" rel="external">mongoDB# Quick Start</a></li>
<li><a href="https://wiki.archlinux.org/index.php/MongoDB#Installation" target="_blank" rel="external">MongoDB in Archlinux</a></li>
<li><a href="http://stackoverflow.com/questions/15229412/unable-to-create-open-lock-file-data-mongod-lock-errno13-permission-denied" target="_blank" rel="external">stackoverflow #Unable to create/open lock file</a></li>
<li><a href="http://stackoverflow.com/questions/7948789/mongodb-mongod-complains-that-there-is-no-data-db-folder" target="_blank" rel="external">stackoverflow  #mongodb Mongod complains that there is no /data/db folder</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;MongoDB安装&quot;&gt;&lt;a href=&quot;#MongoDB安装&quot; class=&quot;headerlink&quot; title=&quot;MongoDB安装&quot;&gt;&lt;/a&gt;MongoDB安装&lt;/h2&gt;&lt;p&gt;学习node快接近尾声了, 想使用express+ejs+mongoDB 完成一个小栗子, 算是我学习node的一个结业考试.  不过,之前从来没有接触过mongodb,对我这小小白来说, 安装-启动mongodb都异常的艰难,  想想真是 …  铁窗呀 ~~  铁门 ~  铁锁链 ~~~  路过的你们请尽情嘲笑吧 ,  我不怕!!!!&lt;/p&gt;
    
    </summary>
    
      <category term="db" scheme="https://egene-huang.github.io/categories/db/"/>
    
    
      <category term="mongodb" scheme="https://egene-huang.github.io/tags/mongodb/"/>
    
      <category term="mongodb install" scheme="https://egene-huang.github.io/tags/mongodb-install/"/>
    
  </entry>
  
  <entry>
    <title>java回调函数</title>
    <link href="https://egene-huang.github.io/2016/11/17/java-callback/"/>
    <id>https://egene-huang.github.io/2016/11/17/java-callback/</id>
    <published>2016-11-17T05:42:37.000Z</published>
    <updated>2016-11-17T14:03:51.510Z</updated>
    
    <content type="html"><![CDATA[<p>在js中,因为js是单线程,所以在js中操作中,经常使用回调函数实现程序的异步执行, 从而解决代码串行导致线程阻塞的问题,或者类似<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="external">map</a>/<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" target="_blank" rel="external">filter</a>等函数 - 将一个函数作用到数组的每个元素上. </p>
<a id="more"></a> 
<p>如下这样:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">dosomth</span>(<span class="params">arg,callback</span>) </span>&#123;</div><div class="line"></div><div class="line">	<span class="keyword">var</span> exec = (<span class="keyword">typeof</span> callback === <span class="string">'function'</span>) , </div><div class="line">              ret = [], isArr = arg <span class="keyword">instanceof</span> <span class="built_in">Array</span>;</div><div class="line">	</div><div class="line">	<span class="keyword">if</span> (!exec) &#123;</div><div class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(callback + <span class="string">' is not a function'</span>) ;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">if</span> (isArr) &#123;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>, len = arg.length; i &lt; len ; i++) &#123;</div><div class="line">			ret.push(callback.call(<span class="literal">null</span>,arg[i])) ;</div><div class="line">		&#125;</div><div class="line">	&#125;<span class="keyword">else</span> &#123;</div><div class="line">		ret = arg ;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> ret ;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>调用如:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = dosomth([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>],<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> e * e ;</div><div class="line">&#125;) ;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(arr) ;</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//print</div><div class="line">[ 1, 4, 9, 16, 25 ]</div></pre></td></tr></table></figure>
<p>这段代码简单的模仿了javascript高阶函数<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" target="_blank" rel="external"><code>map</code></a>, 循环处理每一个<code>Entry</code> ,  在js中能这么使用得益于javaScript中函数有多样化的表达方式, 函数可以是一个对象,也可以是一个函数表达式, 在上面我们可以将一个函数当做一个形参传递给函数<code>dosomth</code> . 在java中是没办法做到这一点的, 因为在java中,一切皆对象, 所以成员都需要依附在某个对象上, 所以,如果想实现类似上述回调的机制, 可以从java的代理模式上找到灵感. </p>
<p>先定义一个<code>回调函数</code>接口:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Callback</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function">List&lt;String&gt; <span class="title">callback</span><span class="params">(List&lt;String&gt; list)</span> </span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后,定义使用<code>这个回调函数的抽象业务类</code> , 如:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">doSomthing</span><span class="params">(List&lt;String&gt; list,Callback callback)</span> </span>&#123;</div><div class="line">        <span class="comment">//</span></div><div class="line"></div><div class="line">        <span class="keyword">return</span> callback.callback(list) ;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后定义具体的业务类,如:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        C c = <span class="keyword">new</span> C() ;</div><div class="line"></div><div class="line"></div><div class="line">        List&lt;String&gt; list = <span class="keyword">new</span> ArrayList&lt;String&gt;() ;</div><div class="line">        list.add(<span class="string">"1"</span>);</div><div class="line">        list.add(<span class="string">"2"</span>);</div><div class="line">        list.add(<span class="string">"3"</span>);</div><div class="line">        list.add(<span class="string">"4"</span>);</div><div class="line">        list.add(<span class="string">"5"</span>);</div><div class="line">        list.add(<span class="string">"6"</span>);</div><div class="line">        list.add(<span class="string">"7"</span>);</div><div class="line">        list.add(<span class="string">"8"</span>);</div><div class="line"></div><div class="line">        List&lt;String&gt; result = c.doSomthing(list, <span class="keyword">new</span> Callback() &#123;</div><div class="line">            <span class="meta">@Override</span></div><div class="line">            <span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">callback</span><span class="params">(List&lt;String&gt; list)</span> </span>&#123;</div><div class="line">                List&lt;String&gt; list1 = <span class="keyword">new</span> ArrayList&lt;String&gt;();</div><div class="line">                <span class="keyword">for</span> (String str : list) &#123;</div><div class="line">                    list1.add(str + <span class="string">"_"</span> + str);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">return</span> list1;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//</span></div><div class="line">        &#125;) ;</div><div class="line"></div><div class="line">        System.out.println(<span class="string">" 处理后的字符数组 : "</span> + result);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行<code>test.main</code> 可以看到输出:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">处理后的字符数组 : [1_1, 2_2, 3_3, 4_4, 5_5, 6_6, 7_7, 8_8]</div></pre></td></tr></table></figure></p>
<p>在这段代码中,其实就是将js中的函数表达式引用变为java对象引用持有,然后调用指定方法或函数实现业务功能. 这其实和代理模式一样一样的. 都是将具体的业务处理逻辑委托给另一个对象来完成.</p>
<p>以上就是我对代理和java版<code>回调</code>的理解,请指正!  thx ~~</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在js中,因为js是单线程,所以在js中操作中,经常使用回调函数实现程序的异步执行, 从而解决代码串行导致线程阻塞的问题,或者类似&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map&quot;&gt;map&lt;/a&gt;/&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter&quot;&gt;filter&lt;/a&gt;等函数 - 将一个函数作用到数组的每个元素上. &lt;/p&gt;
    
    </summary>
    
      <category term="Java" scheme="https://egene-huang.github.io/categories/Java/"/>
    
    
      <category term="java" scheme="https://egene-huang.github.io/tags/java/"/>
    
      <category term="callback" scheme="https://egene-huang.github.io/tags/callback/"/>
    
  </entry>
  
  <entry>
    <title>Hello Hexo</title>
    <link href="https://egene-huang.github.io/2016/11/16/hexo-hello/"/>
    <id>https://egene-huang.github.io/2016/11/16/hexo-hello/</id>
    <published>2016-11-16T11:25:24.626Z</published>
    <updated>2016-11-16T11:25:24.626Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<a id="more"></a>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Just Do</title>
    <link href="https://egene-huang.github.io/2016/11/16/success-text/"/>
    <id>https://egene-huang.github.io/2016/11/16/success-text/</id>
    <published>2016-11-16T06:42:07.000Z</published>
    <updated>2016-11-16T11:25:24.626Z</updated>
    
    <content type="html"><![CDATA[<hr>
<blockquote><p>Do not seek to follow in the footsteps of the men of old; seek what they sought.<br>不要追寻先人的足迹,追寻先人所追寻的吧!</p>
<footer><strong>Basho</strong></footer></blockquote>
<hr>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;blockquote&gt;&lt;p&gt;Do not seek to follow in the footsteps of the men of old; seek what they sought.&lt;br&gt;不要追寻先人的足迹,追寻先人所追寻的吧!&lt;/p&gt;
&lt;footer&gt;&lt;st
    
    </summary>
    
    
      <category term="english shanbay" scheme="https://egene-huang.github.io/tags/english-shanbay/"/>
    
  </entry>
  
  <entry>
    <title>使用.gitignore文件取消某些文件版本控制</title>
    <link href="https://egene-huang.github.io/2016/11/15/remove-tracked-file/"/>
    <id>https://egene-huang.github.io/2016/11/15/remove-tracked-file/</id>
    <published>2016-11-15T14:25:29.000Z</published>
    <updated>2016-11-16T11:25:24.626Z</updated>
    
    <content type="html"><![CDATA[<hr>
<p>   忽然想把我的博客重新弄一下，然后还想把博客源码备份到github上，于是就开始弄了， 于是一边准备环境一边提交到 <em>github</em> 上，结果就导致了 <code>/public/</code> 、<code>/node_modules/</code>、<code>db.json</code>等这些文件/夹也推送到github上了, 一直只是<code>听说git/github</code> 没有实际使用过(瞬间感觉自己好悲哀呀，路人甲一定这么认为滴-_-#) ，所以刚学习了git/github使用，听说有一个<code>.gitignore</code>文件可以做到忽略指定文件/夹， 让我们<code>git status</code> 不会罗列被忽略的文件。</p>
<a id="more"></a>
<p>所以我就在git仓库根目录下新建了<code>.gitignore</code> 结果，没有生效，因为这些文件之前已经被git追踪了，网上一顿找，需要先告诉git取消这些文件的追踪 ， 需要运行这行命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm --cached public/</div></pre></td></tr></table></figure></p>
<p>使用这种方式是无法达到目的的，会提示:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fatal: not removing <span class="string">'public/'</span> recursively without -r</div></pre></td></tr></table></figure></p>
<p>需要使用参数<code>-r</code> 来递归删除目录，否则只能删除文件，所以取消git版本的命令应该是这样:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rm -r --cached public</div></pre></td></tr></table></figure></p>
<p>然后就可以看到很多文件从版本中删除了。 </p>
<p>可笑，我之前还想着从github仓库中删除这些文件，然后本地<code>git pull</code> 就能达到目的，我真是凹凸了。。。</p>
<p>慢慢折腾，加油！！！！</p>
<p>参考链接:<br><a href="https://segmentfault.com/q/1010000000430426" target="_blank" rel="external">segmentfault#n͛i͛g͛h͛t͛i͛r͛e͛</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;hr&gt;
&lt;p&gt;   忽然想把我的博客重新弄一下，然后还想把博客源码备份到github上，于是就开始弄了， 于是一边准备环境一边提交到 &lt;em&gt;github&lt;/em&gt; 上，结果就导致了 &lt;code&gt;/public/&lt;/code&gt; 、&lt;code&gt;/node_modules/&lt;/code&gt;、&lt;code&gt;db.json&lt;/code&gt;等这些文件/夹也推送到github上了, 一直只是&lt;code&gt;听说git/github&lt;/code&gt; 没有实际使用过(瞬间感觉自己好悲哀呀，路人甲一定这么认为滴-_-#) ，所以刚学习了git/github使用，听说有一个&lt;code&gt;.gitignore&lt;/code&gt;文件可以做到忽略指定文件/夹， 让我们&lt;code&gt;git status&lt;/code&gt; 不会罗列被忽略的文件。&lt;/p&gt;
    
    </summary>
    
    
      <category term="git, github" scheme="https://egene-huang.github.io/tags/git-github/"/>
    
  </entry>
  
</feed>
